angular.module("angularValidator",[]),angular.module("angularValidator").directive("angularValidator",function(){return{restrict:"A",link:function(a,b){function c(a){for(var b=0;b<a.length;b++)b in a&&e(a[b])}function d(){for(;r.length;){var a=r.pop();a()}}function e(b){r.push(a.$watch(function(){return b.value+q.submitted+i(b)+j(b)+f(q[b.name])+g(q[b.name])+h(q[b.name])},function(){k(b),o(b)}))}function f(a){return a&&"$dirty"in a?a.$dirty:void 0}function g(a){return a&&"$modelValue"in a?a.$modelValue:void 0}function h(a){return a&&"$valid"in a?a.$valid:void 0}function i(a){if("validator"in a.attributes&&q[a.name]){var b=angular.element(a).scope(),c=b.$eval(a.attributes.validator.value);return q[a.name].$setValidity("angularValidator",c),c}}function j(a){if("ng-required"in a.attributes){var b=angular.element(a).scope();return b.$eval(a.attributes["ng-required"].value)}}function k(a){var b=function(){return"<i class='fa fa-times'></i> Required"},c=function(){return"<i class='fa fa-times'></i> Invalid"};if(a.name in q){var d=q[a.name],e=n(a);e&&e.remove(),q.submitted&&(d.$error.required?"required-message"in a.attributes?m(a,a.attributes["required-message"].value):m(a,b):d.$valid||("invalid-message"in a.attributes?m(a,a.attributes["invalid-message"].value):m(a,c)))}}function l(b){return"<label class='control-label has-error validationMessage'>"+a.$eval(b)+"</label>"}function m(a,b){if("validator-message-append-to"in a.attributes){var c=a.attributes["validator-message-append-to"].value;angular.element(a).closest(c).append(l(b))}else angular.element(a).after(l(b))}function n(a){var b;if("validator-message-append-to"in a.attributes){var c=a.attributes["validator-message-append-to"].value;b=angular.element(a).closest(c).children()}else b=angular.element(a).parent().children();for(var d=0;d<b.length;d++)if(angular.element(b[d]).hasClass("validationMessage"))return angular.element(b[d]);return!1}function o(a){var b=angular.element(a),c="validator-group"in a.attributes&&a.attributes["validator-group"].value,d=b.closest("."+c),e="validator-group-elements"in a.attributes&&a.attributes["validator-group-elements"].value;if(e&&!c)throw new Error('You must define "validator-group" which contains "validator-group-elements"');if(a.name in q){var f=q[a.name];if(b.removeClass("has-error"),b.parent().removeClass("has-error"),d.length&&d.removeClass("has-error"),q.submitted)if(f.$invalid)b.parent().addClass("has-error"),b.addClass("has-error"),d.length&&d.addClass("has-error");else if(e){var g=d.find(e);if(!g.length)throw new Error('Can not find elements by selector="'+e+'" in validator-group="'+c+'" ');angular.forEach(g,function(a){var b=q[a.name];if(!b)throw new Error('Can not find element with name="'+a.name+'" in validator-group="'+c+'" ');return b.$invalid?d.addClass("has-error"):void 0})}}}var p=angular.element(b)[0],q=a[p.name];q.submitted=!1;var r=[];b.on("submit",function(b){b.preventDefault(),a.$apply(function(){q.submitted=!0}),q.$valid&&a.$eval(p.attributes["angular-validator-submit"].value)});var s=a.$watch(function(){return p.length},function(){d(),c(p)});b.bind("$destroy",function(){s(),d()}),q.reset=function(){for(var a=0;a<p.length;a++)p[a].name&&(q[p[a].name].$setViewValue(""),q[p[a].name].$render());q.submitted=!1,q.$setPristine()},c(p)}}}),angular.module("angularValidator").provider("angularValidator",["$provide",function(a){this.decorateNgModelDirective=function(){a.decorator("ngModelDirective",["$delegate",function(a){var b=a[0],c=b.controller;return b.controller=["$scope","$element","$attrs","$injector",function(a,b,d,e){var f=e.get("$interpolate");d.$set("name",f(d.name||"")(a)),e.invoke(c,this,{$scope:a,$element:b,$attrs:d})}],a}])},this.decorateFormDirective=function(){a.decorator("formDirective",["$delegate",function(a){var b=a[0],c=b.controller;return b.controller=["$scope","$element","$attrs","$injector",function(a,b,d,e){var f=e.get("$interpolate");d.$set("name",f(d.name||d.ngForm||"")(a)),e.invoke(c,this,{$scope:a,$element:b,$attrs:d})}],a}])},this.$get=function(){return{}}}]);